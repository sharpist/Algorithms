_______________________________________________________________________________
# "Сериализация" – 
#### преобразование объекта в поток байтов для сохранения или передачи. ####
_______________________________________________________________________________

Сериализация применяется для сохранения состояния объекта и последующего
воссоздания при необходимости (десериализация).
```
     O b j e c t            объект сериализуется в поток байтов
          |
D B——[B y t e s]——F i l e   который содержит не только данные
          |
     M e m o r y            но и сведения о типе объекта
```
_______________________________________________________________________________
# Установка объекта в сериализуемый (двоичная сериализация)
_______________________________________________________________________________

Классы для сериализации и десериализации объектов содержатся в пространстве
имён ```System.Runtime.Serialization```.

1. Применить к типу атрибут ```SerializableAttribute``` или реализовать интерфейс
```ISerializable```, чтобы указать возможность сериализации экземпляров этого типа:
* атрибут ```SerializableAttribute``` не наследуется подклассами, подклассы не
являются по умолчанию сериализируемыми.
* если сериализуемый класс содержит ссылки на объекты других классов, отмеченные
```SerializableAttribute```, эти объекты тоже будут сериализованы.
* сериализируются только резервные поля автоматически реализуемых свойств.
* двоичная сериализация реализует политику отключения (opt-out), поэтому
участники класса, не подлежащие сериализации, отмечаются явно.
* атрибут ```NonSerializedAttribute``` выставит поле в классе как не подлежащее
сериализации.
* все поля должны поддерживать сериализацию подобно примитивным типам .NET
(```int```, ```string```).

```c#
[Serializable] // по умолчанию вкл. все закрытые
// и открытые поля (кроме свойств) в данном типе
public sealed class Person
{
    public string Name;
    public int Age;
}
```

2. Создать файл или открыть на чтение в файловом потоке.

3. Воспользоваться методами ```Serialize(Stream, Object)``` или ```Deserialize(Stream)```
экземпляра класса форматера (```BinaryFormatter``` или ```SoapFormatter```), предоставляющего
базовую функциональность для форматеров сериализации среды CLR:
* сериализированные данные содержат полные сведения о типе и сборке.
* десериализатор пропускает инициализаторы полей и конструкторы.
* десериализатор полностью восстанавливает объектные ссылки. В том числе,
распространяется на коллекции (которые в пространстве имён ```System.Collections.*```
отмечены как сериализируемые).
_______________________________________________________________________________
# Порядок сериализации
_______________________________________________________________________________

#### [Двоичная сериализация](https://github.com/sharpist/C_Sharp/blob/master/Serialization/manual/BinarySerializer.md#Двоичный-сериализатор): ####
* высокий уровень автоматизации.
* предохранение объектных ссылок.
* возможность сериализации неоткрытых полей, сериализует все элементы, даже
доступные только для чтения.
* имеет более высокую производительность и эффективное сжатие вывода.
* использует двоичное кодирование, создавая компактные потоки для хранения или
передачи через сетевые сокеты.
* слабая переносимость версий.

#### [XML сериализация](https://github.com/sharpist/C_Sharp/blob/master/Serialization/manual/XmlSerializer.md#xml-сериализатор): ####
Необходимые классы определены в пространстве имён ```System.Xml.Serialization```.
Управлять сериализацией и десериализацией экземпляров класса, выполняемой
```XmlSerializer```, можно через применение к классам и их членам специальных
атрибутов.
* средний уровень автоматизации.
* отсутствует предохранение объектных ссылок.
* отсутствует возможность сериализации неоткрытых полей.
* низкая производительность и низкое сжатие вывода.
* все открытые поля и свойства объекта (или параметры и возвращаемые значения
метода) сериализуются в XML-поток по правилам определенного документа XSD
(язык определения схемы XML).
* предоставляет больше возможностей для совместного доступа к объектам и их
использования в процессах взаимодействия.
* создаёт строго типизированные классы с открытыми свойствами и полями.
* создаёт удобочитаемый код.
* переносимость версий высокая.

#### [Интерфейс IXmlSerializable](https://github.com/sharpist/C_Sharp/blob/master/Serialization/manual/IXmlSerializable.md#Интерфейс-ixmlserializable): ####
Выполнение сериализации с классами ```XmlReader``` и ```XmlWriter```.
* низкий уровень автоматизации.
* предохранение объектных ссылок по выбору.
* возможность сериализации неоткрытых полей.
* низкая производительность и низкое сжатие вывода.
* расширяет сериализацию XML для сложных задач сериализации.
* создаёт удобочитаемый код.
* переносимость версий высокая.

#### [Сериализация контрактов данных](https://github.com/sharpist/C_Sharp/blob/master/Serialization/manual/DataContractSerializer.md#Сериализатор-контрактов-данных): ####
Является самым новым и наиболее универсальным из трёх механизмов сериализации.
Отвязывает низкоуровневые детали типов, которые необходимо сериализировать, от
структуры сериализированных данных.
* средний уровень автоматизации.
* предохранение объектных ссылок по выбору.
* возможность сериализации неоткрытых полей.
* низкая производительность и низкое сжатие вывода.
* переносимость версий наивысшая.
_______________________________________________________________________________
# Cпособ сериализации
_______________________________________________________________________________

#### Базовая сериализация: ####
* использует платформу .NET Framework для автоматической сериализации объекта.
* единственное условие – наличие атрибута ```SerializableAttribute``` у
сериализуемого объекта.
* является простым способом сериализации и не даёт контроля над процессом.

#### Пользовательская сериализация: ####
* класс должен иметь атрибут ```SerializableAttribute``` и реализовывать интерфейс
```ISerializable```.
* можно точно указать, какие объекты и как будут сериализованы.


(для контроля десериализации объекта, необходима)
#### Сериализация конструктора: ####
* выполняет преобразование графа объекта в файл исходного кода, с помощью
которого впоследствии можно восстановить граф объекта.
* файл исходного кода может содержать программный код, разметку, информацию из
SQL.
_______________________________________________________________________________
# Существование раздельных подходов сериализации
_______________________________________________________________________________

Для решения первоначальных задач сериализации графов объектов .NET с
обеспечением точности типов и ссылок под требования удалённой обработки
(Remoting), и возможности взаимодействия со стандартами обмена сообщениями XML
и SOAP – веб-службы (Web Services) предусматривалось два механизма:
двоичный сериализатор и сериализатор XML соответственно.

Для инфраструктуры WCF (Windows Communication Foundation) в результате
унификации Remoting и Web Services вводится сериализатор контрактов данных.
_______________________________________________________________________________
# Инициирование сериализации
_______________________________________________________________________________

* явное запрашивание сериализации и десериализации объекта с опеределением
механизма и форматтера.

* неявная – запускается платформой .NET Framework, когда сериализатор
рекурсивно сериализирует дочерний объект, или используется средство,
полагающееся на сериализацию (Remoting, Web Services, WCF):

Remoting использует двоичную сериализацию, Web Services задействует
сериализацию XML и WCF применяет сериализатор контрактов данных.
