# Атрибуты

_________________________________________________________________________________________
#### Создание настраиваемых атрибутов ####

Например, требуется пометить тип тегом с именем разработчика, для этого можно определить
класс настраиваемых атрибутов ```Author```:

1. определяется класс атрибута, наследующий от ```System.Attribute```, где имя класса – это
имя атрибута ```Author```.

a. параметры конструктора являются позиционными параметрами настраиваемого атрибута
(в данном случае ```name``` позиционный параметр).

b. все открытые поля или свойства, доступные для чтения и записи, являются именованными
параметрами (в данном случае ```version``` именованный параметр).

2. используется атрибут ```AttributeUsage```, делающий атрибут ```Author``` допустимым только для класса и
объявлений ```struct```.

a. ```AttributeUsage``` имеет именованный параметр ```AllowMultiple```, выставляющий для
настраиваемого атрибута однократное или многократное использование.

![screen capture 1](01.png)

*несколько атрибутов одного типа применяются к классу
_________________________________________________________________________________________
#### Обращение к атрибутам с помощью отражения ####

Отражение позволяет извлекать сведения, определённые с настраиваемыми атрибутами.
Метод ```GetCustomAttributes``` возвращает массив объектов, являющихся эквивалентами атрибутов
исходного кода во время выполнения.

В примере, представленном выше, спецификация атрибута ```Author```
```
[Author("R. Koch", version = 1.3)]  
class SampleClass
```
эквивалентна следующему коду:
```
Author anonymousAuthorObject = new Author("R. Koch");  
anonymousAuthorObject.version = 1.3;
```
Однако, код не выполняется до тех пор, пока у ```SampleClass``` не будут запрошены атрибуты.

#### Таким образом, вызов метода ```GetCustomAttributes``` в ```SampleClass``` приведет к тому, что объект ####
#### ```Author``` будет создан и инициализирован так, как показано выше. ####
Метод ```GetCustomAttributes``` возвращает объект ```Author``` и все другие объекты атрибутов в
массиве.

![screen capture 2](02.png)

*определение атрибута должно находиться в текущем пространстве имён, иначе должно
вводиться пространство имён с определением нужного атрибута

Опрашивается объект ```Type```, чтобы получить данные об атрибуте на уровне класса.

Можно также использовать члены класса ```Type```, чтобы получить отдельные методы и члены
переданного класса:
для этого выполняется метод ```Type.GetMethods```, помещающий экземпляры всех методов в массив
объектов ```System.Reflection.MemberInfo``` и получаются данные об атрибуте на уровне методов.

Аналогичным образом можно найти атрибуты на уровне свойств используя метод
```Type.GetProperties```.
_________________________________________________________________________________________
